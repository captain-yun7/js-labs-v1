<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ë²¤íŠ¸ ë²„ë¸”ë§ê³¼ ìº¡ì²˜ë§</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #333;
        }
        h1 {
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .section {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .demo-container {
            text-align: center;
            margin: 30px 0;
        }
        .demo {
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            position: relative;
            transition: background-color 0.2s;
        }
        .grandparent {
            background-color: #ffecb3;
            width: 300px;
            height: 300px;
            padding: 25px;
            margin: 0 auto;
        }
        .parent {
            background-color: #ffcc80;
            width: 200px;
            height: 200px;
            padding: 25px;
            margin: 25px auto;
        }
        .child {
            background-color: #ffa726;
            width: 100px;
            height: 100px;
            line-height: 100px;
            margin: 25px auto;
        }
        .demo:hover {
            opacity: 0.9;
        }
        .event-log {
            height: 200px;
            background-color: #424242;
            color: #fff;
            font-family: monospace;
            padding: 10px;
            overflow-y: auto;
            border-radius: 4px;
            margin-top: 20px;
        }
        .controls {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        button {
            padding: 8px 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .clear-btn {
            background-color: #f44336;
        }
        .clear-btn:hover {
            background-color: #d32f2f;
        }
        code {
            background-color: #f1f1f1;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        .diagram {
            margin: 20px 0;
            text-align: center;
        }
        .diagram img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ì´ë²¤íŠ¸ ë²„ë¸”ë§ê³¼ ìº¡ì²˜ë§</h1>
    
    <div class="section">
        <h2>ì´ë²¤íŠ¸ ì „íŒŒ (Event Propagation)</h2>
        <p>ì›¹ í˜ì´ì§€ì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, ì´ë²¤íŠ¸ëŠ” DOM íŠ¸ë¦¬ë¥¼ ë”°ë¼ ì „íŒŒë©ë‹ˆë‹¤. ì´ë²¤íŠ¸ ì „íŒŒì—ëŠ” <strong>ìº¡ì²˜ë§(Capturing)</strong>ê³¼ <strong>ë²„ë¸”ë§(Bubbling)</strong>ì´ë¼ëŠ” ë‘ ê°€ì§€ ë‹¨ê³„ê°€ ìˆìŠµë‹ˆë‹¤.</p>
        
        <h3>ì´ë²¤íŠ¸ ì „íŒŒ ë‹¨ê³„</h3>
        <ol>
            <li><strong>ìº¡ì²˜ë§ ë‹¨ê³„ (Capturing Phase)</strong>: ì´ë²¤íŠ¸ê°€ ë£¨íŠ¸ ìš”ì†Œì—ì„œ ì‹œì‘í•˜ì—¬ íƒ€ê¹ƒ ìš”ì†Œë¡œ ë‚´ë ¤ê°‘ë‹ˆë‹¤.</li>
            <li><strong>íƒ€ê¹ƒ ë‹¨ê³„ (Target Phase)</strong>: ì´ë²¤íŠ¸ê°€ ì‹¤ì œ íƒ€ê¹ƒ ìš”ì†Œì— ë„ë‹¬í•©ë‹ˆë‹¤.</li>
            <li><strong>ë²„ë¸”ë§ ë‹¨ê³„ (Bubbling Phase)</strong>: ì´ë²¤íŠ¸ê°€ íƒ€ê¹ƒ ìš”ì†Œì—ì„œ ì‹œì‘í•˜ì—¬ ë£¨íŠ¸ ìš”ì†Œë¡œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</li>
        </ol>
        
        <div class="diagram">
            <pre>
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Document    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       div       â”‚ â—„â”€â”€â”€ 3. ë²„ë¸”ë§ ë‹¨ê³„
    â”‚  (grandparent)  â”‚      (ìƒí–¥ì‹ ì „íŒŒ)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       div       â”‚
    â”‚     (parent)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼         
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       div       â”‚ â—„â”€â”€â”€ 2. íƒ€ê¹ƒ ë‹¨ê³„
    â”‚     (child)     â”‚      (ì´ë²¤íŠ¸ ë°œìƒ)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–²
             â”‚         
             â”‚        
      1. ìº¡ì²˜ë§ ë‹¨ê³„
        (í•˜í–¥ì‹ ì „íŒŒ)
            </pre>
        </div>
    </div>
    
    <div class="section">
        <h2>ì´ë²¤íŠ¸ ì „íŒŒ ì˜ˆì œ</h2>
        <p>ì•„ë˜ ì¤‘ì²©ëœ ìƒìë“¤ì„ í´ë¦­í•´ë³´ì„¸ìš”. ì´ë²¤íŠ¸ê°€ ì–´ë–»ê²Œ ì „íŒŒë˜ëŠ”ì§€ ë¡œê·¸ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <div class="controls">
            <button id="toggle-capturing">ìº¡ì²˜ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ í† ê¸€</button>
            <button id="toggle-bubbling">ë²„ë¸”ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ í† ê¸€</button>
            <button id="stop-propagation-toggle">ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨ í† ê¸€</button>
            <button class="clear-btn" id="clear-log">ë¡œê·¸ ì§€ìš°ê¸°</button>
        </div>
        
        <div class="demo-container">
            <div class="demo grandparent" id="grandparent">
                í• ì•„ë²„ì§€ ìš”ì†Œ
                <div class="demo parent" id="parent">
                    ë¶€ëª¨ ìš”ì†Œ
                    <div class="demo child" id="child">
                        ìì‹ ìš”ì†Œ
                    </div>
                </div>
            </div>
            
            <div class="event-log" id="event-log"></div>
        </div>
    </div>
    
    <div class="section">
        <h2>addEventListenerì˜ ì„¸ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜</h2>
        <p><code>addEventListener</code> ë©”ì„œë“œì˜ ì„¸ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ìº¡ì²˜ë§ ë‹¨ê³„ì—ì„œ ì‹¤í–‰ë ì§€ ì—¬ë¶€ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</p>
        
        <pre><code>// ë²„ë¸”ë§ ë‹¨ê³„ì—ì„œ ì‹¤í–‰ (ê¸°ë³¸ê°’)
element.addEventListener('click', handler, false);

// ìº¡ì²˜ë§ ë‹¨ê³„ì—ì„œ ì‹¤í–‰
element.addEventListener('click', handler, true);</code></pre>
        
        <p>ë˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì˜µì…˜ ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:</p>
        
        <pre><code>element.addEventListener('click', handler, {
  capture: true,  // ìº¡ì²˜ë§ ë‹¨ê³„ì—ì„œ ì‹¤í–‰
  once: true,     // ì´ë²¤íŠ¸ê°€ í•œ ë²ˆë§Œ ì‹¤í–‰ë¨
  passive: true   // preventDefault()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠìŒì„ ë¸Œë¼ìš°ì €ì— ì•Œë¦¼
});</code></pre>
    </div>
    
    <div class="section">
        <h2>ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨í•˜ê¸°</h2>
        <p>ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì¤‘ë‹¨í•˜ë ¤ë©´ <code>event.stopPropagation()</code> ë©”ì„œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
        <pre><code>element.addEventListener('click', function(event) {
  event.stopPropagation();
  // ì´ë²¤íŠ¸ê°€ ë” ì´ìƒ ì „íŒŒë˜ì§€ ì•ŠìŒ
});</code></pre>
        
        <p><strong>ì£¼ì˜:</strong> ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì¤‘ë‹¨í•˜ë©´ ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¼­ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
    </div>
    
    <script>
        // ìš”ì†Œ ì„ íƒ
        const grandparent = document.getElementById('grandparent');
        const parent = document.getElementById('parent');
        const child = document.getElementById('child');
        const eventLog = document.getElementById('event-log');
        
        // ìº¡ì²˜ë§ ë° ë²„ë¸”ë§ ì„¤ì •
        let useCapturing = true;
        let useBubbling = true;
        let stopPropagation = false;
        
        // ë¡œê·¸ ì¶œë ¥ í•¨ìˆ˜
        function log(text) {
            const entry = document.createElement('div');
            entry.textContent = text;
            eventLog.appendChild(entry);
            eventLog.scrollTop = eventLog.scrollHeight;
        }
        
        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜
        function handleClick(event) {
            const phase = event.eventPhase === 1 ? "ìº¡ì²˜ë§" : 
                         event.eventPhase === 2 ? "íƒ€ê¹ƒ" : "ë²„ë¸”ë§";
            
            log(`${event.currentTarget.id} ìš”ì†Œì—ì„œ ${phase} ë‹¨ê³„ ì´ë²¤íŠ¸ ë°œìƒ`);
            
            if (stopPropagation) {
                event.stopPropagation();
                log(`ğŸ’¡ ${event.currentTarget.id} ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨`);
            }
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • í•¨ìˆ˜
        function setupEventListeners() {
            // ë¨¼ì €, ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
            removeEventListeners();
            
            // ìº¡ì²˜ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            if (useCapturing) {
                grandparent.addEventListener('click', handleClick, true);
                parent.addEventListener('click', handleClick, true);
                child.addEventListener('click', handleClick, true);
                log("âœ… ìº¡ì²˜ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
            
            // ë²„ë¸”ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            if (useBubbling) {
                grandparent.addEventListener('click', handleClick, false);
                parent.addEventListener('click', handleClick, false);
                child.addEventListener('click', handleClick, false);
                log("âœ… ë²„ë¸”ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° í•¨ìˆ˜
        function removeEventListeners() {
            grandparent.removeEventListener('click', handleClick, true);
            parent.removeEventListener('click', handleClick, true);
            child.removeEventListener('click', handleClick, true);
            
            grandparent.removeEventListener('click', handleClick, false);
            parent.removeEventListener('click', handleClick, false);
            child.removeEventListener('click', handleClick, false);
        }
        
        // ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
        document.getElementById('toggle-capturing').addEventListener('click', function() {
            useCapturing = !useCapturing;
            setupEventListeners();
            this.textContent = useCapturing ? "ìº¡ì²˜ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ í•´ì œ" : "ìº¡ì²˜ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ ì„¤ì •";
        });
        
        document.getElementById('toggle-bubbling').addEventListener('click', function() {
            useBubbling = !useBubbling;
            setupEventListeners();
            this.textContent = useBubbling ? "ë²„ë¸”ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ í•´ì œ" : "ë²„ë¸”ë§ ë‹¨ê³„ ì´ë²¤íŠ¸ ì„¤ì •";
        });
        
        document.getElementById('stop-propagation-toggle').addEventListener('click', function() {
            stopPropagation = !stopPropagation;
            this.textContent = stopPropagation ? "ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨ í•´ì œ" : "ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨ ì„¤ì •";
            log(`ğŸ’¡ ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨ ${stopPropagation ? "í™œì„±í™”" : "ë¹„í™œì„±í™”"}`);
        });
        
        document.getElementById('clear-log').addEventListener('click', function() {
            eventLog.innerHTML = '';
        });
        
        // ì´ˆê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        setupEventListeners();
    </script>
</body>
</html> 